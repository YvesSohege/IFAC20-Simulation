<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">Psi</span> , <span class="var type1" id="S3T1U4">Theta</span>, <span class="var type1" id="S4T1U5">Phi</span> ]   = fcn(<span class="var type1" id="S5T1U8">r1</span>, <span class="var type1" id="S6T1U9">r2</span> , <span class="var type1" id="S7T1U10">r3</span>, <span class="var type1" id="S8T1U11">r4</span> ,<span class="var type1" id="S9T1U12">X</span>, <span class="var type1" id="S10T1U13">Y</span>, <span class="var type1" id="S2T1U14">Psi</span> , <span class="var type1" id="S11T1U15">U</span> , <span class="var type1" id="S12T1U16">V</span>, <span class="var type1" id="S4T1U17">Phi</span>,    <span class="var type1" id="S13T1U18">W</span>,  <span class="var type1" id="S14T1U19">P</span> , <span class="var type1" id="S15T1U20">The</span>, <span class="var type1" id="S16T1U21">Q</span> , <span class="var type1" id="S17T1U22">R</span>, <span class="var type1" id="S18T1U23">Z</span>, <span class="var type1" id="S19T1U24">time</span> , <span class="var type1" id="S20T1U25">r1_speed</span> ,<span class="var type1" id="S21T1U26">r2_speed</span>,<span class="var type1" id="S22T1U27">r3_speed</span>,<span class="var type1" id="S23T1U28">r4_speed</span>, <span class="var type1" id="S24T1U29">sig_5</span> , <span class="var type1" id="S25T1U30">sig_6</span>, <span class="var type1" id="S26T1U31">sig_8</span>, <span class="var type1" id="S27T1U32">sig_7</span> , <span class="var type1" id="S28T1U33">Phi_Cmd</span>, <span class="var type1" id="S29T1U34">The_Cmd</span>, <span class="var type1" id="S30T1U35">Psi_Cmd</span>, <span class="var type1" id="S31T1U36">Alt_Cmd</span>, <span class="var type1" id="S32T1U37">X_Cmd</span>, <span class="var type1" id="S33T1U38">Y_Cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%coder.extrinsic('sim');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line">coder.extrinsic(<span class="string">'run'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line">coder.extrinsic(<span class="string">'assignin'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line">coder.extrinsic(<span class="string">'struct'</span>);  </span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line">coder.extrinsic(<span class="string">'evalin'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S35T0U64">previousTime</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S36T0U66">sim_error</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S37T0U68">sim_iteration</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S38T0U70">result</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S39T0U72">Phi_blend</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S40T0U74">Theta_blend</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S41T0U76">Psi_blend</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S42T0U78">sim_state_P</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S43T0U80">sim_state_R</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S44T0U82">sim_state_Phi</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S45T0U84">sim_state_The</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S46T0U86">sim_state_Psi</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S47T0U88">sim_state_U</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S48T0U90">sim_state_Q</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S49T0U92">sim_state_V</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S50T0U94">sim_state_W</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S51T0U96">sim_state_X</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S52T0U98">sim_state_Y</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S53T0U100">sim_state_Z</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S54T0U102">sim_state_r1_speed</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S55T0U104">sim_state_r2_speed</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S56T0U106">sim_state_r3_speed</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S57T0U108">sim_state_r4_speed</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S58T0U110">sim_state_sig_5</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S59T0U112">sim_state_sig_6</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S60T0U114">sim_state_sig_7</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S61T0U116">sim_state_sig_8</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S62T0U118">sim_state_Phi_Cmd</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S63T0U120">sim_state_The_Cmd</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S64T0U122">sim_state_Psi_Cmd</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S65T0U124">sim_state_Alt_Cmd</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S66T0U126">sim_state_X_Cmd</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,41" id="srcline41"> 41</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S67T0U128">sim_state_Y_Cmd</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,42" id="srcline42"> 42</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,43" id="srcline43"> 43</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S68T0U130">error1</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,44" id="srcline44"> 44</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S69T0U132">error2</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,45" id="srcline45"> 45</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S70T0U134">error3</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,46" id="srcline46"> 46</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S71T0U136">error4</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,47" id="srcline47"> 47</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,48" id="srcline48"> 48</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S72T0U138">Phi_sim_blend</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,49" id="srcline49"> 49</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S73T0U140">Theta_sim_blend</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S74T0U142">Psi_sim_blend</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line"><span class="mxinfo " id="T1:U35"><span class="var type1" id="S75T1U145">sim_time</span> = <span class="mxinfo " id="T1:U37">2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line"><span class="keyword">if</span>(<span class="mxinfo " id="T2:U38"><span class="mxinfo " id="T3:U39"><span class="var type1" id="S35T3U152">previousTime</span>+<span class="mxinfo " id="T1:U41">1</span></span> &lt; <span class="var type1" id="S19T1U154">time</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line">    <span class="mxinfo " id="T3:U43"><span class="var type1" id="S35T3U157">previousTime</span> = int16(<span class="var type1" id="S19T1U160">time</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line">    <span class="mxinfo " id="T1:U46"><span class="var type1" id="S77T1U163">n</span> = <span class="mxinfo " id="T1:U48">3</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line">    <span class="mxinfo " id="T4:U49"><span class="var type1" id="S38T4U167">result</span> = <span class="mxinfo " id="T4:U51">zeros(<span class="mxinfo " id="T1:U52">1</span>,<span class="var type1" id="S77T1U171">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line">    <span class="mxinfo " id="T4:U54"><span class="var type1" id="S39T4U174">Phi_blend</span> = <span class="mxinfo " id="T4:U56">zeros(<span class="mxinfo " id="T1:U57">1</span>,<span class="var type1" id="S77T1U178">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line">    <span class="mxinfo " id="T4:U59"><span class="var type1" id="S40T4U181">Theta_blend</span> = <span class="mxinfo " id="T4:U61">zeros(<span class="mxinfo " id="T1:U62">1</span>,<span class="var type1" id="S77T1U185">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line">    <span class="mxinfo " id="T4:U64"><span class="var type1" id="S41T4U188">Psi_blend</span> = <span class="mxinfo " id="T4:U66">zeros(<span class="mxinfo " id="T1:U67">1</span>,<span class="var type1" id="S77T1U192">n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line">    <span class="mxinfo " id="T1:U69"><span class="var type1" id="S79T1U195">X_goal</span> = <span class="mxinfo " id="T1:U71"><span class="var type1" id="S9T1U197">X</span>+<span class="var type1" id="S75T1U198">sim_time</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line">    <span class="mxinfo " id="T5:U74"><span class="var type1" id="S80T5U201">X_t</span> = <span class="mxinfo " id="T5:U76">[ <span class="var type1" id="S9T1U204">X</span>, <span class="var type1" id="S79T1U205">X_goal</span>]</span></span>; <span class="comment">% meters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line">    <span class="mxinfo " id="T5:U79"><span class="var type1" id="S81T5U208">Y_t</span> = <span class="mxinfo " id="T5:U81">[ <span class="var type1" id="S10T1U211">Y</span>, <span class="mxinfo " id="T1:U83">0</span>]</span></span>; <span class="comment">% meters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line">    <span class="mxinfo " id="T5:U84"><span class="var type1" id="S82T5U215">Z_t</span> = <span class="mxinfo " id="T5:U86">[ <span class="var type1" id="S18T1U218">Z</span>, <span class="mxinfo " id="T1:U88">3</span>]</span></span>; <span class="comment">% meters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line">    <span class="mxinfo " id="T5:U89"><span class="var type1" id="S83T5U222">t</span> = <span class="mxinfo " id="T5:U91">[ <span class="mxinfo " id="T1:U92">0</span>, <span class="var type1" id="S75T1U226">sim_time</span>]</span></span>; <span class="comment">% seconds</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line">    <span class="mxinfo " id="T5:U94"><span class="var type1" id="S84T5U229">Psi_t</span> = <span class="mxinfo " id="T5:U96">[<span class="var type1" id="S2T1U232">Psi</span>, <span class="mxinfo " id="T1:U98">0</span>]</span></span>; <span class="comment">% radians</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line">    <span class="mxinfo " id="T6:U99"><span class="extrinsicFcn" id="F2N2:B236">assignin</span>(<span class="mxinfo " id="T7:U100"><span class="string">'base'</span></span>, <span class="mxinfo " id="T8:U101"><span class="string">'X_t'</span></span>, <span class="var type1" id="S80T5U239">X_t</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line">    <span class="mxinfo " id="T6:U103"><span class="extrinsicFcn" id="F3N2:B242">assignin</span>(<span class="mxinfo " id="T7:U104"><span class="string">'base'</span></span>, <span class="mxinfo " id="T8:U105"><span class="string">'Y_t'</span></span>, <span class="var type1" id="S81T5U245">Y_t</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line">    <span class="mxinfo " id="T6:U107"><span class="extrinsicFcn" id="F4N2:B248">assignin</span>(<span class="mxinfo " id="T7:U108"><span class="string">'base'</span></span>, <span class="mxinfo " id="T8:U109"><span class="string">'Z_t'</span></span>, <span class="var type1" id="S82T5U251">Z_t</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line">    <span class="mxinfo " id="T6:U111"><span class="extrinsicFcn" id="F5N2:B254">assignin</span>(<span class="mxinfo " id="T7:U112"><span class="string">'base'</span></span>, <span class="mxinfo " id="T9:U113"><span class="string">'t'</span></span>, <span class="var type1" id="S83T5U257">t</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line">    <span class="mxinfo " id="T6:U115"><span class="extrinsicFcn" id="F6N2:B260">assignin</span>(<span class="mxinfo " id="T7:U116"><span class="string">'base'</span></span>, <span class="mxinfo " id="T10:U117"><span class="string">'Psi_t'</span></span>, <span class="var type1" id="S84T5U263">Psi_t</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line">    <span class="mxinfo " id="T6:U119"><span class="extrinsicFcn" id="F7N5:B266">run</span>(<span class="mxinfo " id="T11:U120"><span class="string">'generate_sim_path'</span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S87T1U270">i</span> = <span class="mxinfo " id="T12:U122"><span class="mxinfo " id="T1:U123">1</span>:<span class="var type1" id="S77T1U273">n</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line"><span class="comment">        <span class="comment">%{</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line"><span class="comment">        sim_state_values = struct('X' , X , 'Y',Y, 'Psi', Psi , 'U', U, 'V', V, 'Phi', Phi, 'P', P, 'The', The, 'Q',  Q, 'W', W, 'R', R, 'Z', Z, 'r1_speed', r1_speed, 'r2_speed', r2_speed , 'r3_speed', r3_speed, 'r4_speed', r4_speed, 'sig_5',  sig_5 , 'sig_6' , sig_6 , 'sig_7' ,sig_7, 'sig_8', sig_8, 'Phi_Cmd', Phi_Cmd, 'The_Cmd', The_Cmd, 'Psi_Cmd', Psi_Cmd, 'Alt_Cmd', Alt_Cmd, 'X_Cmd', X_Cmd, 'Y_Cmd', Y_Cmd );</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,83" id="srcline83"> 83</a></span><span class="line"><span class="comment">        sim_state_lables = 'blah';</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,84" id="srcline84"> 84</a></span><span class="line"><span class="comment">        sim_state = struct('values', sim_state_values, 'label', sim_state_lables, 'blockName' , 'placeholder');</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,85" id="srcline85"> 85</a></span><span class="line"><span class="comment">        </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,86" id="srcline86"> 86</a></span><span class="line"><span class="comment">        disp(sim_state);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,87" id="srcline87"> 87</a></span><span class="line"><span class="comment">        assignin('base', 'sim_state',sim_state );</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,88" id="srcline88"> 88</a></span><span class="line"><span class="comment">           <span class="comment">%}</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,89" id="srcline89"> 89</a></span><span class="line">        <span class="mxinfo " id="T1:U125"><span class="var type1" id="S51T1U276">sim_state_X</span> = <span class="var type1" id="S9T1U277">X</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,90" id="srcline90"> 90</a></span><span class="line">        <span class="mxinfo " id="T1:U128"><span class="var type1" id="S52T1U280">sim_state_Y</span> = <span class="var type1" id="S10T1U281">Y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,91" id="srcline91"> 91</a></span><span class="line">        <span class="mxinfo " id="T1:U131"><span class="var type1" id="S46T1U284">sim_state_Psi</span> = <span class="var type1" id="S2T1U285">Psi</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,92" id="srcline92"> 92</a></span><span class="line">        <span class="mxinfo " id="T1:U134"><span class="var type1" id="S47T1U288">sim_state_U</span> = <span class="var type1" id="S11T1U289">U</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,93" id="srcline93"> 93</a></span><span class="line">        <span class="mxinfo " id="T1:U137"><span class="var type1" id="S49T1U292">sim_state_V</span> = <span class="var type1" id="S12T1U293">V</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,94" id="srcline94"> 94</a></span><span class="line">        <span class="mxinfo " id="T1:U140"><span class="var type1" id="S44T1U296">sim_state_Phi</span> = <span class="var type1" id="S4T1U297">Phi</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,95" id="srcline95"> 95</a></span><span class="line">        <span class="mxinfo " id="T1:U143"><span class="var type1" id="S42T1U300">sim_state_P</span> = <span class="var type1" id="S14T1U301">P</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,96" id="srcline96"> 96</a></span><span class="line">        <span class="mxinfo " id="T1:U146"><span class="var type1" id="S45T1U304">sim_state_The</span> = <span class="var type1" id="S15T1U305">The</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,97" id="srcline97"> 97</a></span><span class="line">        <span class="mxinfo " id="T1:U149"><span class="var type1" id="S48T1U308">sim_state_Q</span> = <span class="var type1" id="S16T1U309">Q</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,98" id="srcline98"> 98</a></span><span class="line">        <span class="mxinfo " id="T1:U152"><span class="var type1" id="S50T1U312">sim_state_W</span> = <span class="var type1" id="S13T1U313">W</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,99" id="srcline99"> 99</a></span><span class="line">        <span class="mxinfo " id="T1:U155"><span class="var type1" id="S43T1U316">sim_state_R</span> = <span class="var type1" id="S17T1U317">R</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,100" id="srcline100">100</a></span><span class="line">        <span class="mxinfo " id="T1:U158"><span class="var type1" id="S53T1U320">sim_state_Z</span> = <span class="var type1" id="S18T1U321">Z</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,101" id="srcline101">101</a></span><span class="line">        <span class="mxinfo " id="T1:U161"><span class="var type1" id="S54T1U324">sim_state_r1_speed</span> = <span class="var type1" id="S20T1U325">r1_speed</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,102" id="srcline102">102</a></span><span class="line">        <span class="mxinfo " id="T1:U164"><span class="var type1" id="S55T1U328">sim_state_r2_speed</span> = <span class="var type1" id="S21T1U329">r2_speed</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,103" id="srcline103">103</a></span><span class="line">        <span class="mxinfo " id="T1:U167"><span class="var type1" id="S56T1U332">sim_state_r3_speed</span> = <span class="var type1" id="S22T1U333">r3_speed</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,104" id="srcline104">104</a></span><span class="line">        <span class="mxinfo " id="T1:U170"><span class="var type1" id="S57T1U336">sim_state_r4_speed</span> =<span class="var type1" id="S23T1U337">r4_speed</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,105" id="srcline105">105</a></span><span class="line">        <span class="mxinfo " id="T1:U173"><span class="var type1" id="S58T1U340">sim_state_sig_5</span> = <span class="var type1" id="S24T1U341">sig_5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,106" id="srcline106">106</a></span><span class="line">        <span class="mxinfo " id="T1:U176"><span class="var type1" id="S59T1U344">sim_state_sig_6</span> = <span class="var type1" id="S25T1U345">sig_6</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,107" id="srcline107">107</a></span><span class="line">        <span class="mxinfo " id="T1:U179"><span class="var type1" id="S61T1U348">sim_state_sig_8</span> = <span class="var type1" id="S26T1U349">sig_8</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,108" id="srcline108">108</a></span><span class="line">        <span class="mxinfo " id="T1:U182"><span class="var type1" id="S60T1U352">sim_state_sig_7</span> = <span class="var type1" id="S27T1U353">sig_7</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,109" id="srcline109">109</a></span><span class="line">        <span class="mxinfo " id="T1:U185"><span class="var type1" id="S62T1U356">sim_state_Phi_Cmd</span> =  <span class="var type1" id="S28T1U357">Phi_Cmd</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,110" id="srcline110">110</a></span><span class="line">        <span class="mxinfo " id="T1:U188"><span class="var type1" id="S63T1U360">sim_state_The_Cmd</span> = <span class="var type1" id="S29T1U361">The_Cmd</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,111" id="srcline111">111</a></span><span class="line">        <span class="mxinfo " id="T1:U191"><span class="var type1" id="S64T1U364">sim_state_Psi_Cmd</span>= <span class="var type1" id="S30T1U365">Psi_Cmd</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,112" id="srcline112">112</a></span><span class="line">        <span class="mxinfo " id="T1:U194"><span class="var type1" id="S65T1U368">sim_state_Alt_Cmd</span> = <span class="var type1" id="S31T1U369">Alt_Cmd</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,113" id="srcline113">113</a></span><span class="line">        <span class="mxinfo " id="T1:U197"><span class="var type1" id="S66T1U372">sim_state_X_Cmd</span> = <span class="var type1" id="S32T1U373">X_Cmd</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,114" id="srcline114">114</a></span><span class="line">        <span class="mxinfo " id="T1:U200"><span class="var type1" id="S67T1U376">sim_state_Y_Cmd</span> = <span class="var type1" id="S33T1U377">Y_Cmd</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,115" id="srcline115">115</a></span><span class="line">       </span></span>
<span class="srcline"><span class="lineno"><a href="1,116" id="srcline116">116</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,117" id="srcline117">117</a></span><span class="line">        <span class="mxinfo " id="T6:U203"><span class="extrinsicFcn" id="F8N2:B380">assignin</span>(<span class="mxinfo " id="T7:U204"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U205"><span class="string">'sim_state_X'</span></span>,<span class="var type1" id="S51T1U383">sim_state_X</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,118" id="srcline118">118</a></span><span class="line">        <span class="mxinfo " id="T6:U207"><span class="extrinsicFcn" id="F9N2:B386">assignin</span>(<span class="mxinfo " id="T7:U208"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U209"><span class="string">'sim_state_Y'</span></span>,<span class="var type1" id="S52T1U389">sim_state_Y</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,119" id="srcline119">119</a></span><span class="line">        <span class="mxinfo " id="T6:U211"><span class="extrinsicFcn" id="F10N2:B392">assignin</span>(<span class="mxinfo " id="T7:U212"><span class="string">'base'</span></span>, <span class="mxinfo " id="T14:U213"><span class="string">'sim_state_Psi'</span></span>,<span class="var type1" id="S46T1U395">sim_state_Psi</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,120" id="srcline120">120</a></span><span class="line">        <span class="mxinfo " id="T6:U215"><span class="extrinsicFcn" id="F11N2:B398">assignin</span>(<span class="mxinfo " id="T7:U216"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U217"><span class="string">'sim_state_U'</span></span>,<span class="var type1" id="S47T1U401">sim_state_U</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,121" id="srcline121">121</a></span><span class="line">        <span class="mxinfo " id="T6:U219"><span class="extrinsicFcn" id="F12N2:B404">assignin</span>(<span class="mxinfo " id="T7:U220"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U221"><span class="string">'sim_state_V'</span></span>,<span class="var type1" id="S49T1U407">sim_state_V</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,122" id="srcline122">122</a></span><span class="line">        <span class="mxinfo " id="T6:U223"><span class="extrinsicFcn" id="F13N2:B410">assignin</span>(<span class="mxinfo " id="T7:U224"><span class="string">'base'</span></span>, <span class="mxinfo " id="T14:U225"><span class="string">'sim_state_Phi'</span></span>, <span class="var type1" id="S44T1U413">sim_state_Phi</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,123" id="srcline123">123</a></span><span class="line">        <span class="mxinfo " id="T6:U227"><span class="extrinsicFcn" id="F14N2:B416">assignin</span>(<span class="mxinfo " id="T7:U228"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U229"><span class="string">'sim_state_P'</span></span>,<span class="var type1" id="S42T1U419">sim_state_P</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,124" id="srcline124">124</a></span><span class="line">        <span class="mxinfo " id="T6:U231"><span class="extrinsicFcn" id="F15N2:B422">assignin</span>(<span class="mxinfo " id="T7:U232"><span class="string">'base'</span></span>, <span class="mxinfo " id="T14:U233"><span class="string">'sim_state_The'</span></span>,<span class="var type1" id="S45T1U425">sim_state_The</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,125" id="srcline125">125</a></span><span class="line">        <span class="mxinfo " id="T6:U235"><span class="extrinsicFcn" id="F16N2:B428">assignin</span>(<span class="mxinfo " id="T7:U236"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U237"><span class="string">'sim_state_Q'</span></span>, <span class="var type1" id="S48T1U431">sim_state_Q</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,126" id="srcline126">126</a></span><span class="line">        <span class="mxinfo " id="T6:U239"><span class="extrinsicFcn" id="F17N2:B434">assignin</span>(<span class="mxinfo " id="T7:U240"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U241"><span class="string">'sim_state_W'</span></span>,<span class="var type1" id="S50T1U437">sim_state_W</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,127" id="srcline127">127</a></span><span class="line">        <span class="mxinfo " id="T6:U243"><span class="extrinsicFcn" id="F18N2:B440">assignin</span>(<span class="mxinfo " id="T7:U244"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U245"><span class="string">'sim_state_R'</span></span>, <span class="var type1" id="S43T1U443">sim_state_R</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,128" id="srcline128">128</a></span><span class="line">        <span class="mxinfo " id="T6:U247"><span class="extrinsicFcn" id="F19N2:B446">assignin</span>(<span class="mxinfo " id="T7:U248"><span class="string">'base'</span></span>, <span class="mxinfo " id="T13:U249"><span class="string">'sim_state_Z'</span></span>, <span class="var type1" id="S53T1U449">sim_state_Z</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,129" id="srcline129">129</a></span><span class="line">        <span class="mxinfo " id="T6:U251"><span class="extrinsicFcn" id="F20N2:B452">assignin</span>(<span class="mxinfo " id="T7:U252"><span class="string">'base'</span></span>, <span class="mxinfo " id="T15:U253"><span class="string">'sim_state_r1_speed'</span></span>, <span class="var type1" id="S54T1U455">sim_state_r1_speed</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,130" id="srcline130">130</a></span><span class="line">        <span class="mxinfo " id="T6:U255"><span class="extrinsicFcn" id="F21N2:B458">assignin</span>(<span class="mxinfo " id="T7:U256"><span class="string">'base'</span></span>, <span class="mxinfo " id="T15:U257"><span class="string">'sim_state_r2_speed'</span></span>, <span class="var type1" id="S55T1U461">sim_state_r2_speed</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,131" id="srcline131">131</a></span><span class="line">        <span class="mxinfo " id="T6:U259"><span class="extrinsicFcn" id="F22N2:B464">assignin</span>(<span class="mxinfo " id="T7:U260"><span class="string">'base'</span></span>, <span class="mxinfo " id="T15:U261"><span class="string">'sim_state_r3_speed'</span></span>, <span class="var type1" id="S56T1U467">sim_state_r3_speed</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,132" id="srcline132">132</a></span><span class="line">        <span class="mxinfo " id="T6:U263"><span class="extrinsicFcn" id="F23N2:B470">assignin</span>(<span class="mxinfo " id="T7:U264"><span class="string">'base'</span></span>, <span class="mxinfo " id="T15:U265"><span class="string">'sim_state_r4_speed'</span></span>, <span class="var type1" id="S57T1U473">sim_state_r4_speed</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,133" id="srcline133">133</a></span><span class="line">        <span class="mxinfo " id="T6:U267"><span class="extrinsicFcn" id="F24N2:B476">assignin</span>(<span class="mxinfo " id="T7:U268"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U269"><span class="string">'sim_state_sig_5'</span></span>, <span class="var type1" id="S58T1U479">sim_state_sig_5</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,134" id="srcline134">134</a></span><span class="line">        <span class="mxinfo " id="T6:U271"><span class="extrinsicFcn" id="F25N2:B482">assignin</span>(<span class="mxinfo " id="T7:U272"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U273"><span class="string">'sim_state_sig_8'</span></span>,<span class="var type1" id="S61T1U485">sim_state_sig_8</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,135" id="srcline135">135</a></span><span class="line">        <span class="mxinfo " id="T6:U275"><span class="extrinsicFcn" id="F26N2:B488">assignin</span>(<span class="mxinfo " id="T7:U276"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U277"><span class="string">'sim_state_sig_7'</span></span>, <span class="var type1" id="S60T1U491">sim_state_sig_7</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,136" id="srcline136">136</a></span><span class="line">        <span class="mxinfo " id="T6:U279"><span class="extrinsicFcn" id="F27N2:B494">assignin</span>(<span class="mxinfo " id="T7:U280"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U281"><span class="string">'sim_state_sig_6'</span></span>, <span class="var type1" id="S59T1U497">sim_state_sig_6</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,137" id="srcline137">137</a></span><span class="line">        <span class="mxinfo " id="T6:U283"><span class="extrinsicFcn" id="F28N2:B500">assignin</span>(<span class="mxinfo " id="T7:U284"><span class="string">'base'</span></span>, <span class="mxinfo " id="T11:U285"><span class="string">'sim_state_Phi_Cmd'</span></span>, <span class="var type1" id="S62T1U503">sim_state_Phi_Cmd</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,138" id="srcline138">138</a></span><span class="line">        <span class="mxinfo " id="T6:U287"><span class="extrinsicFcn" id="F29N2:B506">assignin</span>(<span class="mxinfo " id="T7:U288"><span class="string">'base'</span></span>, <span class="mxinfo " id="T11:U289"><span class="string">'sim_state_The_Cmd'</span></span>, <span class="var type1" id="S63T1U509">sim_state_The_Cmd</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,139" id="srcline139">139</a></span><span class="line">        <span class="mxinfo " id="T6:U291"><span class="extrinsicFcn" id="F30N2:B512">assignin</span>(<span class="mxinfo " id="T7:U292"><span class="string">'base'</span></span>, <span class="mxinfo " id="T11:U293"><span class="string">'sim_state_Psi_Cmd'</span></span>, <span class="var type1" id="S64T1U515">sim_state_Psi_Cmd</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,140" id="srcline140">140</a></span><span class="line">        <span class="mxinfo " id="T6:U295"><span class="extrinsicFcn" id="F31N2:B518">assignin</span>(<span class="mxinfo " id="T7:U296"><span class="string">'base'</span></span>, <span class="mxinfo " id="T11:U297"><span class="string">'sim_state_Alt_Cmd'</span></span>, <span class="var type1" id="S65T1U521">sim_state_Alt_Cmd</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,141" id="srcline141">141</a></span><span class="line">        <span class="mxinfo " id="T6:U299"><span class="extrinsicFcn" id="F32N2:B524">assignin</span>(<span class="mxinfo " id="T7:U300"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U301"><span class="string">'sim_state_X_Cmd'</span></span>, <span class="var type1" id="S66T1U527">sim_state_X_Cmd</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,142" id="srcline142">142</a></span><span class="line">        <span class="mxinfo " id="T6:U303"><span class="extrinsicFcn" id="F33N2:B530">assignin</span>(<span class="mxinfo " id="T7:U304"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U305"><span class="string">'sim_state_Y_Cmd'</span></span>,<span class="var type1" id="S67T1U533">sim_state_Y_Cmd</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,143" id="srcline143">143</a></span><span class="line">     </span></span>
<span class="srcline"><span class="lineno"><a href="1,144" id="srcline144">144</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,145" id="srcline145">145</a></span><span class="line">        <span class="mxinfo " id="T1:U307"><span class="var type1" id="S68T1U536">error1</span> = <span class="var type1" id="S5T1U537">r1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,146" id="srcline146">146</a></span><span class="line">        <span class="mxinfo " id="T1:U310"><span class="var type1" id="S69T1U540">error2</span> = <span class="var type1" id="S6T1U541">r2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,147" id="srcline147">147</a></span><span class="line">        <span class="mxinfo " id="T1:U313"><span class="var type1" id="S70T1U544">error3</span> = <span class="var type1" id="S7T1U545">r3</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,148" id="srcline148">148</a></span><span class="line">        <span class="mxinfo " id="T1:U316"><span class="var type1" id="S71T1U548">error4</span> = <span class="var type1" id="S8T1U549">r4</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,149" id="srcline149">149</a></span><span class="line">        <span class="mxinfo " id="T17:U319"><span class="var type1" id="S37T17U552">sim_iteration</span> = <span class="mxinfo " id="T17:U321">zeros(<span class="mxinfo " id="T1:U322">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,150" id="srcline150">150</a></span><span class="line">        <span class="mxinfo " id="T6:U323"><span class="extrinsicFcn" id="F34N2:B558">assignin</span>(<span class="mxinfo " id="T7:U324"><span class="string">'base'</span></span>, <span class="mxinfo " id="T14:U325"><span class="string">'sim_iteration'</span></span>,<span class="var type1" id="S37T17U561">sim_iteration</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,151" id="srcline151">151</a></span><span class="line">        <span class="comment">%gen random blends</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,152" id="srcline152">152</a></span><span class="line">        <span class="mxinfo " id="T1:U327"><span class="var type1" id="S88T1U564">Phi_sim_blend_rand</span> = <span class="mxinfo " id="T1:U329">rand()</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,153" id="srcline153">153</a></span><span class="line">        <span class="mxinfo " id="T1:U330"><span class="var type1" id="S90T1U569">Theta_sim_blend_rand</span> = <span class="mxinfo " id="T1:U332">rand()</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,154" id="srcline154">154</a></span><span class="line">        <span class="mxinfo " id="T1:U333"><span class="var type1" id="S91T1U574">Psi_sim_blend_rand</span> = <span class="mxinfo " id="T1:U335">rand()</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,155" id="srcline155">155</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,156" id="srcline156">156</a></span><span class="line">        <span class="mxinfo " id="T1:U336"><span class="var type1" id="S92T1U579">Phi_sim_blend_int</span> = <span class="mxinfo " id="T1:U338">round(<span class="mxinfo " id="T1:U339"><span class="var type1" id="S88T1U583">Phi_sim_blend_rand</span>*<span class="mxinfo " id="T1:U341">10</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,157" id="srcline157">157</a></span><span class="line">        <span class="mxinfo " id="T1:U342"><span class="var type1" id="S94T1U587">Theta_sim_blend_int</span> = <span class="mxinfo " id="T1:U344">round(<span class="mxinfo " id="T1:U345"><span class="var type1" id="S90T1U591">Theta_sim_blend_rand</span>*<span class="mxinfo " id="T1:U347">10</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,158" id="srcline158">158</a></span><span class="line">        <span class="mxinfo " id="T1:U348"><span class="var type1" id="S95T1U595">Psi_sim_blend_int</span> = <span class="mxinfo " id="T1:U350">round(<span class="mxinfo " id="T1:U351"><span class="var type1" id="S91T1U599">Psi_sim_blend_rand</span>*<span class="mxinfo " id="T1:U353">10</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,159" id="srcline159">159</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,160" id="srcline160">160</a></span><span class="line">        <span class="mxinfo " id="T1:U354"><span class="var type1" id="S72T1U603">Phi_sim_blend</span> = <span class="mxinfo " id="T1:U356"><span class="var type1" id="S92T1U605">Phi_sim_blend_int</span>/<span class="mxinfo " id="T1:U358">10</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,161" id="srcline161">161</a></span><span class="line">        <span class="mxinfo " id="T1:U359"><span class="var type1" id="S73T1U609">Theta_sim_blend</span> = <span class="mxinfo " id="T1:U361"><span class="var type1" id="S94T1U611">Theta_sim_blend_int</span>/<span class="mxinfo " id="T1:U363">10</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,162" id="srcline162">162</a></span><span class="line">        <span class="mxinfo " id="T1:U364"><span class="var type1" id="S74T1U615">Psi_sim_blend</span> = <span class="mxinfo " id="T1:U366"><span class="var type1" id="S95T1U617">Psi_sim_blend_int</span>/<span class="mxinfo " id="T1:U368">10</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,163" id="srcline163">163</a></span><span class="line">        <span class="comment">%simulate for N steps</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,164" id="srcline164">164</a></span><span class="line">        <span class="mxinfo " id="T6:U369"><span class="extrinsicFcn" id="F88N2:B621">assignin</span>(<span class="mxinfo " id="T7:U370"><span class="string">'base'</span></span>, <span class="mxinfo " id="T14:U371"><span class="string">'Phi_sim_blend'</span></span>, <span class="var type1" id="S72T1U624">Phi_sim_blend</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,165" id="srcline165">165</a></span><span class="line">        <span class="mxinfo " id="T6:U373"><span class="extrinsicFcn" id="F89N2:B627">assignin</span>(<span class="mxinfo " id="T7:U374"><span class="string">'base'</span></span>, <span class="mxinfo " id="T16:U375"><span class="string">'Theta_sim_blend'</span></span>, <span class="var type1" id="S73T1U630">Theta_sim_blend</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,166" id="srcline166">166</a></span><span class="line">        <span class="mxinfo " id="T6:U377"><span class="extrinsicFcn" id="F90N2:B633">assignin</span>(<span class="mxinfo " id="T7:U378"><span class="string">'base'</span></span>, <span class="mxinfo " id="T14:U379"><span class="string">'Psi_sim_blend'</span></span>,<span class="var type1" id="S74T1U636">Psi_sim_blend</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,167" id="srcline167">167</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,168" id="srcline168">168</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,169" id="srcline169">169</a></span><span class="line">        <span class="mxinfo " id="T8:U381"><span class="var type1" id="S96T8U639">func</span> = <span class="mxinfo " id="T8:U383"><span class="string">'sim'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,170" id="srcline170">170</a></span><span class="line">        <span class="mxinfo " id="T18:U384"><span class="var type1" id="S97T18U643">input</span> = <span class="mxinfo " id="T18:U386"><span class="string">'Partial_Quadcopter_simulation'</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,171" id="srcline171">171</a></span><span class="line">        <span class="mxinfo " id="T6:U387"><span class="var type1" id="S98T6U647">simout</span> = <span class="mxinfo " id="T6:U389"><span class="extrinsicFcn" id="F91N4:B649">feval</span>(<span class="var type1" id="S96T8U650">func</span>,<span class="var type1" id="S97T18U651">input</span>)</span></span>;               </span></span>
<span class="srcline"><span class="lineno"><a href="1,172" id="srcline172">172</a></span><span class="line">        <span class="mxinfo " id="T6:U392"><span class="var type1" id="S100T6U654">sim_err</span> = <span class="mxinfo " id="T6:U394"><span class="extrinsicFcn" id="F92N6:B656">struct</span>(<span class="mxinfo " id="T19:U395">[]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,173" id="srcline173">173</a></span><span class="line">        <span class="mxinfo " id="T6:U396"><span class="var type1" id="S100T6U661">sim_err</span> = <span class="var type1" id="S98T6U662">simout</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,174" id="srcline174">174</a></span><span class="line">        disp(<span class="mxinfo " id="T6:U399"><span class="var type1" id="S100T6U667"><span class="message error" id="M1F1C">sim_err</span></span></span>.SimulationMetadata);</span></span>
<span class="srcline"><span class="lineno"><a href="1,175" id="srcline175">175</a></span><span class="line">        <span class="comment">%record sim result</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,176" id="srcline176">176</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,177" id="srcline177">177</a></span><span class="line">        <span class="comment">%disp(Phi_sim_blend);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,178" id="srcline178">178</a></span><span class="line">        <span class="comment">%disp(Theta_sim_blend);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,179" id="srcline179">179</a></span><span class="line">        <span class="comment">%disp(Psi_sim_blend);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,180" id="srcline180">180</a></span><span class="line">        <span class="mxinfo " id="T1:U400"><span class="mxinfo " id="T1:U401"><span class="var type1" id="S38T4U672">result</span>(<span class="var type1" id="S77T1U673">n</span>)</span> = <span class="var type1" id="S36T1U674">sim_error</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,181" id="srcline181">181</a></span><span class="line">        <span class="mxinfo " id="T1:U405"><span class="mxinfo " id="T1:U406"><span class="var type1" id="S39T4U678">Phi_blend</span>(<span class="var type1" id="S77T1U679">n</span>)</span> = <span class="var type1" id="S72T1U680">Phi_sim_blend</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,182" id="srcline182">182</a></span><span class="line">        <span class="mxinfo " id="T1:U410"><span class="mxinfo " id="T1:U411"><span class="var type1" id="S40T4U684">Theta_blend</span>(<span class="var type1" id="S77T1U685">n</span>)</span> = <span class="var type1" id="S73T1U686">Theta_sim_blend</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,183" id="srcline183">183</a></span><span class="line">        <span class="mxinfo " id="T1:U415"><span class="mxinfo " id="T1:U416"><span class="var type1" id="S41T4U690">Psi_blend</span>(<span class="var type1" id="S77T1U691">n</span>)</span> = <span class="var type1" id="S74T1U692">Psi_sim_blend</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,184" id="srcline184">184</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,185" id="srcline185">185</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,186" id="srcline186">186</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,187" id="srcline187">187</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,188" id="srcline188">188</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,189" id="srcline189">189</a></span><span class="line">    <span class="comment">%update Q matrices</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,190" id="srcline190">190</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,191" id="srcline191">191</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,192" id="srcline192">192</a></span><span class="line"><span class="comment">%output next step for </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,193" id="srcline193">193</a></span><span class="line">[ <span class="var type1" id="S103T1U696">val</span> , <span class="var type1" id="S104T1U697">index</span> ] = min(<span class="var type1" id="S38T4U700">result</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,194" id="srcline194">194</a></span><span class="line"><span class="mxinfo " id="T1:U423"><span class="var type1" id="S2T1U703">Psi</span> = <span class="mxinfo " id="T1:U425"><span class="var type1" id="S39T4U705">Phi_blend</span>(<span class="var type1" id="S104T1U706">index</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,195" id="srcline195">195</a></span><span class="line"><span class="mxinfo " id="T1:U428"><span class="var type1" id="S3T1U709">Theta</span> = <span class="mxinfo " id="T1:U430"><span class="var type1" id="S40T4U711">Theta_blend</span>(<span class="var type1" id="S104T1U712">index</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,196" id="srcline196">196</a></span><span class="line"><span class="mxinfo " id="T1:U433"><span class="var type1" id="S4T1U715">Phi</span> = <span class="mxinfo " id="T1:U435"><span class="var type1" id="S39T4U717">Phi_blend</span>(<span class="var type1" id="S104T1U718">index</span>)</span></span>;</span></span>
</pre>
</body>
</html>
